<UserControl
    x:Class="SimpleDnsCrypt.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:converters="clr-namespace:SimpleDnsCrypt.Converters"
    xmlns:customControls="clr-namespace:SimpleDnsCrypt.Controls"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:lex="http://wpflocalizeextension.codeplex.com"
    xmlns:myControls="clr-namespace:SimpleDnsCrypt.Views"
    xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
    lex:LocalizeDictionary.DesignCulture="en"
    lex:LocalizeDictionary.OutputMissingKeys="False"
    lex:ResxLocalizationProvider.DefaultAssembly="SimpleDnsCrypt"
    lex:ResxLocalizationProvider.DefaultDictionary="Translation"
    Background="{StaticResource LayerFillColorDefaultBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border Grid.Row="0" Padding="8,8,8,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Image
                    Width="16"
                    Height="16"
                    Margin="8,8,8,8"
                    VerticalAlignment="Center"
                    Source="../Images/simplednscrypt.ico" />

                <TextBlock
                    Grid.Column="1"
                    Margin="0,0,8,0"
                    VerticalAlignment="Center"
                    FontWeight="SemiBold"
                    Text="{Binding WindowTitle}" />

                <StackPanel
                    Grid.Column="2"
                    shell:WindowChrome.IsHitTestVisibleInChrome="True"
                    Orientation="Horizontal">
                    <Button
                        x:Name="OpenLogDirectory"
                        cal:Message.Attach="OpenLogDirectory"
                        Cursor="Hand"
                        ToolTip="{lex:Loc Key=open_log_directory}">
                        <iconPacks:PackIconMaterial Kind="ClipboardText" />
                    </Button>
                    <Button
                        x:Name="About"
                        cal:Message.Attach="About"
                        Cursor="Hand"
                        ToolTip="{lex:Loc Key=about}">
                        <iconPacks:PackIconMaterial Kind="Emoticon" />
                    </Button>
                    <Button
                        x:Name="Settings"
                        cal:Message.Attach="Settings"
                        Cursor="Hand"
                        ToolTip="{lex:Loc Key=settings}">
                        <TextBlock
                            VerticalAlignment="Center"
                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                            Text="&#xE713;" />
                    </Button>
                    <Button
                        x:Name="Proxies"
                        cal:Message.Attach="Proxies"
                        Cursor="Hand"
                        ToolTip="{lex:Loc Key=proxy_manage_proxies}">
                        <iconPacks:PackIconMaterial Kind="AccountNetwork" />
                    </Button>
                    <ComboBox
                        Margin="5,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Cursor="Hand"
                        DisplayMemberPath="Name"
                        IsEnabled="True"
                        ItemsSource="{Binding Languages}"
                        Opacity="0.4"
                        SelectedIndex="-1"
                        SelectedItem="{Binding SelectedLanguage}" />
                    <Button
                        x:Name="Minimize"
                        cal:Message.Attach="Minimize"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Cursor="Hand">
                        <TextBlock FontFamily="{StaticResource SymbolThemeFontFamily}" Text="&#xE921;" />
                    </Button>
                    <Button
                        x:Name="CloseWindow"
                        cal:Message.Attach="CloseWindow"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Cursor="Hand">
                        <TextBlock FontFamily="{StaticResource SymbolThemeFontFamily}" Text="&#xE8BB;" />
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        <Border
            Grid.Row="1"
            Grid.Column="0"
            Margin="10"
            Padding="10"
            BorderThickness="1">
            <TabControl
                cal:Message.Attach="[Event SelectionChanged] = [Action TabControl_SelectionChanged($eventArgs)]"
                controls:TabControlHelper.Transition="Right"
                SelectedIndex="{Binding SelectedTabIndex}">
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_mainmenu}"
                    Tag="mainTab">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <DockPanel>
                            <Border
                                MinHeight="75"
                                Padding="8,8"
                                Background="{StaticResource CardBackgroundFillColorDefaultBrush}"
                                BorderThickness="1"
                                DockPanel.Dock="Top"
                                IsEnabled="{Binding IsSavingConfiguration, Converter={StaticResource ReverseBoolToEnabledConverter}}">
                                <StackPanel>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="&#xE713;" />
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="5,0,0,3"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=default_settings_configuration}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                    <UniformGrid Columns="2">
                                        <StackPanel Orientation="Vertical">
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_ipv4}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.ipv4_servers}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_ipv4_tooltip}" />
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_ipv6}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.ipv6_servers}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_ipv6_tooltip}" />
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_dnssec}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.require_dnssec}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_dnssec_tooltip}" />
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_nolog}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.require_nolog}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_nolog_tooltip}" />
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_nofilter}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.require_nofilter}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_nofilter_tooltip}" />
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical">
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_dnscrypt}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.dnscrypt_servers}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_dnscrypt_tooltip}" />
                                            <CheckBox
                                                Margin="5"
                                                Content="{lex:Loc Key=default_settings_configuration_doh}"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.doh_servers}"
                                                ToolTip="{lex:Loc Key=default_settings_configuration_doh_tooltip}" />
                                        </StackPanel>
                                    </UniformGrid>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>

                                        <Button
                                            x:Name="SaveDnsCryptConfiguration"
                                            Grid.Row="1"
                                            Width="Auto"
                                            Height="32"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Bottom"
                                            Content="{lex:Loc Key=default_settings_apply_settings}"
                                            Cursor="Hand"
                                            Style="{DynamicResource AccentButtonStyle}" />
                                    </Grid>
                                </StackPanel>
                            </Border>
                            <Border
                                MinHeight="75"
                                Margin="0,8,0,0"
                                Padding="8,8"
                                Background="{StaticResource CardBackgroundFillColorDefaultBrush}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                                <StackPanel Orientation="Vertical">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="&#xE945;" />
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="5,0,0,3"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=default_settings_service_header}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="250" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            Margin="0,0,0,5"
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=default_settings_service}" />
                                        <ProgressBar
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Width="250"
                                            Margin="0"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            IsIndeterminate="True"
                                            Visibility="{Binding IsWorkingOnService, Converter={StaticResource BoolToVisibilityConverter}}" />
                                        <CheckBox
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Cursor="Hand"
                                            IsChecked="{Binding IsResolverRunning}"
                                            IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}" />
                                        <Label
                                            Grid.Row="1"
                                            Grid.Column="0"
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=advanced_settings_uninstall_text}" />
                                        <ProgressBar
                                            Grid.Row="1"
                                            Grid.Column="1"
                                            Width="250"
                                            Margin="50,14,50,15"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            IsIndeterminate="True"
                                            Visibility="{Binding IsUninstallingService, Converter={StaticResource BoolToVisibilityConverter}}" />
                                        <Button
                                            x:Name="UninstallService"
                                            Grid.Row="1"
                                            Grid.Column="2"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=advanced_settings_uninstall_button}"
                                            Cursor="Hand"
                                            Style="{DynamicResource AccentButtonStyle}">
                                            <Button.IsEnabled>
                                                <MultiBinding Converter="{StaticResource UninstallToEnableConverter}">
                                                    <Binding Path="IsUninstallingService" />
                                                    <Binding Path="IsServiceInstalled" />
                                                </MultiBinding>
                                            </Button.IsEnabled>
                                        </Button>

                                    </Grid>
                                </StackPanel>
                            </Border>
                            <Border
                                Margin="0,8,0,0"
                                Padding="8"
                                Background="{StaticResource CardBackgroundFillColorDefaultBrush}"
                                BorderThickness="1"
                                DockPanel.Dock="Bottom"
                                IsEnabled="{Binding IsSavingConfiguration, Converter={StaticResource ReverseBoolToEnabledConverter}}">
                                <StackPanel Orientation="Vertical">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="&#xEDA3;" />
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="5,0,0,3"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=default_settings_network_cards}"
                                            TextWrapping="Wrap" />
                                        <CheckBox
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            HorizontalAlignment="Right"
                                            Content="{lex:Loc Key=default_settings_show_hidden_cards}"
                                            Cursor="Hand"
                                            IsChecked="{Binding ShowHiddenCards}" />
                                    </Grid>
                                    <ItemsControl ItemsSource="{Binding LocalNetworkInterfaces}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Button
                                                    Margin="4"
                                                    cal:Message.Attach="[Event Click] = [Action NetworkCardClicked($dataContext)]"
                                                    BorderThickness="0">
                                                    <Grid Width="120" Height="120">
                                                        <TextBlock
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                            Style="{StaticResource TitleTextBlockStyle}"
                                                            Text="{Binding Converter={StaticResource InterfaceTypeToIconConverter}}"
                                                            ToolTipService.ToolTip="{Binding Description}" />
                                                        <TextBlock
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Bottom"
                                                            Text="{Binding Name}"
                                                            TextTrimming="WordEllipsis"
                                                            ToolTipService.ToolTip="{Binding Name}" />
                                                    </Grid>
                                                    <Button.Style>
                                                        <Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
                                                            <Setter Property="Background" Value="{StaticResource SystemFillColorNeutralBackgroundBrush}" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding IsUp}" Value="False">
                                                                    <Setter Property="Background" Value="{StaticResource SystemFillColorCriticalBackgroundBrush}" />
                                                                </DataTrigger>
                                                                <MultiDataTrigger>
                                                                    <MultiDataTrigger.Conditions>
                                                                        <Condition Binding="{Binding IsUp}" Value="True" />
                                                                        <Condition Binding="{Binding UseDnsCrypt}" Value="True" />
                                                                    </MultiDataTrigger.Conditions>
                                                                    <Setter Property="Background" Value="{StaticResource SystemFillColorAttentionBrush}" />
                                                                </MultiDataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Button.Style>
                                                </Button>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </Border>
                        </DockPanel>
                    </ScrollViewer>
                </TabItem>
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_resolvers}"
                    Tag="resolverTab">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <DockPanel>
                            <Border
                                Padding="8"
                                Background="{StaticResource CardBackgroundFillColorDefaultBrush}"
                                BorderThickness="1"
                                DockPanel.Dock="Top"
                                IsEnabled="{Binding IsSavingConfiguration, Converter={StaticResource ReverseBoolToEnabledConverter}}">
                                <StackPanel Orientation="Vertical">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="&#xF4A5;" />
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="4,0,0,4"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=resolvers_dnscrypt_mode_header}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                    <TextBlock Margin="0,5,0,0" Text="{lex:Loc Key=resolvers_dnscrypt_mode_description}" />
                                    <CheckBox
                                        Margin="0,5,0,0"
                                        Content="{lex:Loc Key=resolvers_dnscrypt_automatic_mode}"
                                        Cursor="Hand"
                                        IsChecked="{Binding IsDnsCryptAutomaticModeEnabled}">
                                        <CheckBox.Style>
                                            <Style BasedOn="{StaticResource DefaultCheckBoxStyle}" TargetType="CheckBox">
                                                <Style.Triggers>
                                                    <Trigger Property="IsChecked" Value="True">
                                                        <Setter Property="ToolTip" Value="{lex:Loc Key=enabled}" />
                                                    </Trigger>
                                                    <Trigger Property="IsChecked" Value="False">
                                                        <Setter Property="ToolTip" Value="{lex:Loc Key=disabled}" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </CheckBox.Style>
                                    </CheckBox>
                                </StackPanel>
                            </Border>
                            <Border
                                Margin="0,8,0,0"
                                Padding="8"
                                Background="{StaticResource CardBackgroundFillColorDefaultBrush}"
                                BorderThickness="1"
                                DockPanel.Dock="Bottom"
                                IsEnabled="{Binding IsSavingConfiguration, Converter={StaticResource ReverseBoolToEnabledConverter}}">
                                <StackPanel Orientation="Vertical">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="&#xE83B;" />
                                        <StackPanel
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            Margin="5,0,0,3"
                                            Orientation="Horizontal">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                Style="{StaticResource SubtitleTextBlockStyle}"
                                                Text="{lex:Loc Key=resolvers_available_resolvers_header}"
                                                TextWrapping="Wrap" />
                                            <TextBlock
                                                Margin="5,0,0,0"
                                                VerticalAlignment="Center"
                                                Style="{StaticResource SubtitleTextBlockStyle}"
                                                Text="{Binding Resolvers.Count, StringFormat={}({0})}"
                                                TextWrapping="Wrap" />
                                        </StackPanel>
                                        <Button
                                            x:Name="SaveLocalServers"
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            Width="Auto"
                                            HorizontalAlignment="Right"
                                            Content="{lex:Loc Key=default_settings_apply_settings}"
                                            Cursor="Hand"
                                            IsEnabled="{Binding Resolvers.Count, Converter={StaticResource IntegerToBoolConverter}}"
                                            Style="{DynamicResource AccentButtonStyle}" />
                                    </Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock
                                            Margin="5,5,0,2"
                                            VerticalAlignment="Center"
                                            Text="{lex:Loc Key=default_settings_configuration_dnssec}" />
                                        <TextBlock
                                            Margin="5,5,0,2"
                                            VerticalAlignment="Center"
                                            Text="{Binding DnscryptProxyConfiguration.require_dnssec, Converter={StaticResource BoolToTextConverter}}">
                                            <TextBlock.Style>
                                                <Style BasedOn="{StaticResource BaseTextBlockStyle}" TargetType="TextBlock">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding DnscryptProxyConfiguration.require_dnssec}" Value="True">
                                                            <Setter Property="Foreground" Value="{DynamicResource AccentTextFillColorPrimaryBrush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding DnscryptProxyConfiguration.require_dnssec}" Value="False">
                                                            <Setter Property="Foreground" Value="{StaticResource SystemFillColorCautionBrush}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                        <TextBlock Margin="5,5,0,2" VerticalAlignment="Center">
                                            |
                                        </TextBlock>
                                        <TextBlock
                                            Margin="5,5,0,2"
                                            VerticalAlignment="Center"
                                            Text="{lex:Loc Key=default_settings_configuration_nolog}" />
                                        <TextBlock
                                            Margin="5,5,0,2"
                                            VerticalAlignment="Center"
                                            Text="{Binding DnscryptProxyConfiguration.require_nolog, Converter={StaticResource BoolToTextConverter}}">
                                            <TextBlock.Style>
                                                <Style BasedOn="{StaticResource BaseTextBlockStyle}" TargetType="TextBlock">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding DnscryptProxyConfiguration.require_nolog}" Value="True">
                                                            <Setter Property="Foreground" Value="{DynamicResource AccentTextFillColorPrimaryBrush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding DnscryptProxyConfiguration.require_nolog}" Value="False">
                                                            <Setter Property="Foreground" Value="{StaticResource SystemFillColorCautionBrush}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                        <TextBlock Margin="5,5,0,2" VerticalAlignment="Center">
                                            |
                                        </TextBlock>
                                        <TextBlock
                                            Margin="5,5,0,2"
                                            VerticalAlignment="Center"
                                            Text="{lex:Loc Key=default_settings_configuration_nofilter}" />
                                        <TextBlock
                                            Margin="5,5,0,2"
                                            VerticalAlignment="Center"
                                            Text="{Binding DnscryptProxyConfiguration.require_nofilter, Converter={StaticResource BoolToTextConverter}}">
                                            <TextBlock.Style>
                                                <Style BasedOn="{StaticResource BaseTextBlockStyle}" TargetType="TextBlock">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding DnscryptProxyConfiguration.require_nofilter}" Value="True">
                                                            <Setter Property="Foreground" Value="{DynamicResource AccentTextFillColorPrimaryBrush}" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding DnscryptProxyConfiguration.require_nofilter}" Value="False">
                                                            <Setter Property="Foreground" Value="{StaticResource SystemFillColorCautionBrush}" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </StackPanel>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=ActualHeight, Converter={StaticResource HeightConverter}, ConverterParameter='Resolvers'}" />
                                        </Grid.RowDefinitions>
                                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                                            <ItemsControl IsEnabled="True" ItemsSource="{Binding Resolvers}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <UniformGrid Columns="3" />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid
                                                            Margin="8"
                                                            cal:Message.Attach="[Event MouseLeftButtonDown] = [Action ResolverClicked($dataContext)]"
                                                            Cursor="Hand"
                                                            ToolTip="{Binding ToolTip}">
                                                            <Grid.Style>
                                                                <Style TargetType="Grid">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding IsInServerList}" Value="True">
                                                                            <Setter Property="Background" Value="{StaticResource SystemFillColorAttentionBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding IsInServerList}" Value="False">
                                                                            <Setter Property="Background" Value="{StaticResource SystemFillColorNeutralBackgroundBrush}" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Grid.Style>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>
                                                            <Button
                                                                Grid.Row="0"
                                                                Grid.Column="0"
                                                                Margin="4,4,0,0"
                                                                Padding="4"
                                                                Cursor="Hand"
                                                                Visibility="{Binding Protocol, Converter={StaticResource ProtocolToVisibilityConverter}}">
                                                                <TextBlock FontFamily="{StaticResource SymbolThemeFontFamily}" Text="&#xE8B1;" />
                                                                <Button.Style>
                                                                    <Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding RouteState}" Value="Empty">
                                                                                <Setter Property="BorderBrush" Value="{StaticResource SystemFillColorNeutralBrush}" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding RouteState}" Value="Invalid">
                                                                                <Setter Property="BorderBrush" Value="{StaticResource SystemFillColorCriticalBrush}" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding RouteState}" Value="Valid">
                                                                                <Setter Property="BorderBrush" Value="{StaticResource SystemFillColorSuccessBrush}" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                                <Button.ToolTip>
                                                                    <Label Content="{Binding RouteStateText}" FontWeight="DemiBold" />
                                                                </Button.ToolTip>
                                                                <i:Interaction.Triggers>
                                                                    <i:EventTrigger EventName="Click">
                                                                        <cal:ActionMessage MethodName="HandleManageRoutes">
                                                                            <cal:Parameter Value="{Binding}" />
                                                                        </cal:ActionMessage>
                                                                    </i:EventTrigger>
                                                                </i:Interaction.Triggers>
                                                            </Button>
                                                            <TextBlock
                                                                Grid.Row="0"
                                                                Grid.Column="1"
                                                                Margin="4,4,4,0"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Top"
                                                                Text="{Binding DisplayName}"
                                                                TextTrimming="WordEllipsis" />
                                                            <TextBlock
                                                                Grid.Row="1"
                                                                Grid.ColumnSpan="2"
                                                                Height="80"
                                                                Margin="4"
                                                                HorizontalAlignment="Center"
                                                                Style="{StaticResource CaptionTextBlockStyle}"
                                                                Text="{Binding Description}"
                                                                TextWrapping="WrapWithOverflow" />
                                                        </Grid>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                        <TextBlock
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Text="No resolvers have been loaded yet"
                                            Visibility="{Binding Resolvers.Count, Converter={StaticResource IntegerToVisibilityConverter}}" />
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </DockPanel>
                    </ScrollViewer>
                </TabItem>
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_advanced_settings}"
                    Tag="advancedSettingsTab"
                    Visibility="{Binding SettingsViewModel.IsAdvancedSettingsTabVisible, Converter={StaticResource BoolToVisibilityCollapsedConverter}}">

                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <Border DockPanel.Dock="Top" IsEnabled="{Binding IsSavingConfiguration, Converter={StaticResource ReverseBoolToEnabledConverter}}">
                            <StackPanel Orientation="Vertical">
                                <!--  Listen Addresses begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=address_settings_listen_addresses}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="550" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="35" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=address_settings_description}"
                                                TextWrapping="Wrap" />
                                            <Button
                                                x:Name="ListenAddresses"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Width="Auto"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Content="{lex:Loc Key=address_settings_manage_listen_addresses}"
                                                Cursor="Hand"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                                Style="{DynamicResource AccentButtonStyle}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Listen Addresses end  -->
                                <!--  DNS Cache begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=advanced_settings_dnscache}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="35" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=advanced_settings_dnscache_content}"
                                                TextWrapping="Wrap" />
                                            <CheckBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.cache}"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  DNS Cache end  -->
                                <!--  Block IPv6 begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=advanced_settings_blockipv6}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="35" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=advanced_settings_blockipv6_content}"
                                                TextWrapping="Wrap" />
                                            <CheckBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.block_ipv6}"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Block IPv6 end  -->
                                <!--  Force TCP begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=advanced_settings_forcetcp}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="35" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=advanced_settings_forcetcp_content}"
                                                TextWrapping="Wrap" />
                                            <CheckBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.force_tcp}"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Force TCP end  -->
                                <!--  Global Resolver begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=advanced_settings_globalresolver}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="35" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=advanced_settings_globalresolver_content}"
                                                TextWrapping="Wrap" />
                                            <CheckBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Cursor="Hand"
                                                IsChecked="{Binding IsOperatingAsGlobalResolver}"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Global Resolver end  -->
                                <!--  Fallback Resolver begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=advanced_settings_fallback_resolvers}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="550" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=advanced_settings_fallback_resolvers_content}"
                                                TextWrapping="Wrap" />
                                            <Button
                                                x:Name="ManageFallbackResolvers"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Width="Auto"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Content="{lex:Loc Key=advanced_settings_manage_fallback_resolvers}"
                                                Cursor="Hand"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                                Style="{DynamicResource AccentButtonStyle}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Fallback Resolver end  -->
                                <!--  Netprobe Timeout begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{lex:Loc Key=advanced_settings_netprobe_timeout}"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="32.556" />
                                                <ColumnDefinition Width="517.444" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="0,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="{lex:Loc Key=advanced_settings_netprobe_timeout_content}"
                                                TextWrapping="Wrap" />
                                            <!--  Replaced NumericUpDown with a TextBox that allows only non-negative integers  -->
                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Width="80"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                DataObject.Pasting="NetprobeTimeout_Pasting"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                                LostFocus="NetprobeTimeout_LostFocus"
                                                PreviewKeyDown="NetprobeTimeout_PreviewKeyDown"
                                                PreviewTextInput="NetprobeTimeout_PreviewTextInput"
                                                Text="{Binding DnscryptProxyConfiguration.netprobe_timeout, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnExceptions=True, NotifyOnValidationError=True}"
                                                TextAlignment="Right" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Netprobe Timeout end  -->
                                <!--  Logging begin  -->
                                <Border
                                    Margin="0,0,0,8"
                                    Padding="8"
                                    Background="{StaticResource CardBackgroundFillColorDefaultBrush}">
                                    <StackPanel>
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="Proxy Logging"
                                            TextWrapping="Wrap" />
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="35" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Text="Log to dnscrypt-proxy.log (log_level: 0)"
                                                TextWrapping="Wrap" />
                                            <CheckBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Cursor="Hand"
                                                IsChecked="{Binding DnscryptProxyConfiguration.log}"
                                                IsEnabled="{Binding IsWorkingOnService, Converter={StaticResource ReverseBoolToEnabledConverter}}" />
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                <!--  Logging end  -->
                                <Button
                                    x:Name="SaveAdvancedSettings"
                                    Width="Auto"
                                    Margin="0,15,5,5"
                                    HorizontalAlignment="Right"
                                    Content="{lex:Loc Key=default_settings_apply_settings}"
                                    Cursor="Hand"
                                    Style="{DynamicResource AccentButtonStyle}" />
                            </StackPanel>
                        </Border>
                    </ScrollViewer>
                </TabItem>
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_querylog}"
                    Tag="queryLogTab"
                    Visibility="{Binding SettingsViewModel.IsQueryLogTabVisible, Converter={StaticResource BoolToVisibilityCollapsedConverter}}">

                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <Border
                            Padding="8"
                            Background="{StaticResource CardBackgroundFillColorDefaultBrush}"
                            BorderThickness="1"
                            DataContext="{Binding QueryLogViewModel}">
                            <Grid VerticalAlignment="Stretch">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource SubtitleTextBlockStyle}"
                                        Text="{lex:Loc Key=querylog}"
                                        TextWrapping="Wrap" />
                                    <CheckBox
                                        Grid.Row="0"
                                        Grid.Column="2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Cursor="Hand"
                                        IsChecked="{Binding IsQueryLogLogging}" />
                                </Grid>
                                <Grid Grid.Row="1">
                                    <customControls:LoggingListView
                                        VerticalContentAlignment="Stretch"
                                        AutoScroll="True"
                                        FontSize="12"
                                        ItemsSource="{Binding QueryLogLines, Mode=OneWay}"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectedItem="{Binding SelectedQueryLogLine}"
                                        SelectionMode="Single"
                                        Style="{StaticResource DefaultListViewStyle}"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <customControls:LoggingListView.ItemTemplate>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="130" />
                                                        <ColumnDefinition Width="40" />
                                                        <ColumnDefinition Width="90" />
                                                        <ColumnDefinition Width="80" />
                                                        <ColumnDefinition Width="160" />
                                                        <ColumnDefinition Width="40" />
                                                        <ColumnDefinition Width="50" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="{Binding Date, Converter={StaticResource LocalDateConverter}}" />
                                                    <TextBlock
                                                        Grid.Column="1"
                                                        Foreground="{Binding Type, Converter={StaticResource QueryLogTypeToColorConverter}}"
                                                        Text="{Binding Type}" />
                                                    <TextBlock
                                                        Grid.Column="2"
                                                        Foreground="{Binding ReturnCode, Converter={StaticResource QueryLogReturnCodeToColorConverter}}"
                                                        Text="{Binding ReturnCode}" />
                                                    <TextBlock Grid.Column="3" Text="{Binding Address}" />
                                                    <TextBlock Grid.Column="4" Text="{Binding Remote}" />
                                                    <TextBlock Grid.Column="5" Text="{Binding CachedText}" />
                                                    <TextBlock Grid.Column="6" Text="{Binding DurationText}" />
                                                    <TextBlock Grid.Column="7" Text="{Binding Server}" />
                                                </Grid>
                                            </DataTemplate>
                                        </customControls:LoggingListView.ItemTemplate>
                                    </customControls:LoggingListView>

                                    <StackPanel
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Orientation="Vertical">
                                        <StackPanel.Visibility>
                                            <MultiBinding Converter="{StaticResource IntegerBoolToVisibilityConverter}">
                                                <Binding Path="QueryLogLines.Count" />
                                                <Binding Path="IsQueryLogLogging" />
                                            </MultiBinding>
                                        </StackPanel.Visibility>
                                        <controls:ProgressRing
                                            Width="24"
                                            Height="24"
                                            Foreground="{StaticResource AccentTextFillColorPrimaryBrush}" />
                                        <TextBlock Margin="0,10,0,0" Text="{lex:Loc Key=querylog_waiting_for_data}" />
                                    </StackPanel>
                                </Grid>
                                <Grid Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="40" />
                                    </Grid.RowDefinitions>

                                    <TextBlock
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        VerticalAlignment="Center"
                                        Text="{lex:Loc Key=querylog_entry_count}" />
                                    <TextBlock
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        VerticalAlignment="Center"
                                        Text="{Binding QueryLogLines.Count}" />

                                    <StackPanel
                                        Grid.Row="0"
                                        Grid.Column="2"
                                        Margin="5,0,0,0"
                                        HorizontalAlignment="Right"
                                        Orientation="Horizontal">
                                        <Button
                                            x:Name="ClearQueryLog"
                                            cal:Message.Attach="ClearQueryLog"
                                            Cursor="Hand">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                Text="&#xE894;" />
                                            <Button.ToolTip>
                                                <Label Content="{lex:Loc Key=querylog_button_clear}" FontWeight="DemiBold" />
                                            </Button.ToolTip>
                                        </Button>
                                        <Button
                                            x:Name="BlockQueryLogEntry"
                                            Margin="5,0,5,0"
                                            cal:Message.Attach="BlockQueryLogEntry"
                                            Cursor="Hand">
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                Text="&#xE733;" />
                                            <Button.ToolTip>
                                                <Label Content="{lex:Loc Key=querylog_button_block}" FontWeight="DemiBold" />
                                            </Button.ToolTip>
                                        </Button>
                                    </StackPanel>
                                    <TextBlock
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        VerticalAlignment="Center"
                                        Text="{lex:Loc Key=querylog_source_file}" />
                                    <TextBox
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        VerticalAlignment="Center"
                                        HorizontalContentAlignment="Stretch"
                                        VerticalContentAlignment="Center"
                                        IsReadOnly="True"
                                        Text="{Binding QueryLogFile}" />
                                    <Button
                                        x:Name="ChangeQueryLogFilePath"
                                        Grid.Row="1"
                                        Grid.Column="2"
                                        Margin="5,0,5,0"
                                        HorizontalAlignment="Right"
                                        cal:Message.Attach="ChangeQueryLogFilePath"
                                        Cursor="Hand"
                                        IsEnabled="{Binding IsQueryLogLogging, Converter={StaticResource ReverseBoolToEnabledConverter}}">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                                            Text="&#xE712;" />
                                        <Button.ToolTip>
                                            <Label Content="{lex:Loc Key=button_select_path}" FontWeight="DemiBold" />
                                        </Button.ToolTip>
                                    </Button>
                                </Grid>
                            </Grid>
                        </Border>
                    </ScrollViewer>
                </TabItem>
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_cloakandforward}"
                    Tag="cloakAndForwardTab"
                    Visibility="{Binding SettingsViewModel.IsCloakAndForwardTabVisible, Converter={StaticResource BoolToVisibilityCollapsedConverter}}">
                    <TabItem.Content>
                        <DockPanel Margin="0,10,0,0">
                            <Border
                                Margin="0,10,0,0"
                                Padding="10"
                                BorderThickness="1"
                                DataContext="{Binding CloakAndForwardViewModel}"
                                DockPanel.Dock="Top">
                                <Border.BorderBrush>
                                    <DrawingBrush
                                        Opacity="0.4"
                                        TileMode="Tile"
                                        Viewport="0,0,8,8"
                                        ViewportUnits="Absolute">
                                        <DrawingBrush.Drawing>
                                            <DrawingGroup>
                                                <GeometryDrawing Brush="{DynamicResource AccentTextFillColorPrimaryBrush}">
                                                    <GeometryDrawing.Geometry>
                                                        <GeometryGroup>
                                                            <RectangleGeometry Rect="0,0,50,50" />
                                                            <RectangleGeometry Rect="50,50,50,50" />
                                                        </GeometryGroup>
                                                    </GeometryDrawing.Geometry>
                                                </GeometryDrawing>
                                            </DrawingGroup>
                                        </DrawingBrush.Drawing>
                                    </DrawingBrush>
                                </Border.BorderBrush>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <iconPacks:PackIconMaterial
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Width="20"
                                        Height="20"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                        Kind="AccountConvert" />
                                    <TextBlock
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Margin="5,0,0,0"
                                        VerticalAlignment="Center"
                                        FontSize="20"
                                        FontWeight="Bold"
                                        Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                        Text="{lex:Loc Key=cloaking}"
                                        TextWrapping="Wrap" />
                                    <controls:ToggleSwitch
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Margin="0,0,5,0"
                                        HorizontalAlignment="Right"
                                        Cursor="Hand"
                                        IsOn="{Binding IsCloakingEnabled}" />
                                    <Grid
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Margin="0,10,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Label
                                            Grid.Column="0"
                                            Height="30"
                                            MinWidth="120"
                                            VerticalAlignment="Top"
                                            VerticalContentAlignment="Center"
                                            Content="{lex:Loc Key=cloaking_path}" />
                                        <TextBox
                                            Grid.Column="1"
                                            MinWidth="560"
                                            Margin="0,0,0,0"
                                            VerticalContentAlignment="Center"
                                            Background="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                            IsReadOnly="True"
                                            Opacity="0.4"
                                            Text="{Binding CloakingRulesFile}" />
                                        <Button
                                            x:Name="ChangeCloakingRulesFile"
                                            Grid.Column="2"
                                            Width="30"
                                            Height="30"
                                            Margin="15,0,0,0"
                                            HorizontalContentAlignment="Center"
                                            VerticalContentAlignment="Center"
                                            cal:Message.Attach="ChangeCloakingRulesFile"
                                            BorderBrush="{DynamicResource AccentColorBrush}"
                                            Cursor="Hand"
                                            FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                            IsEnabled="{Binding IsCloakingEnabled, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                            Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                            <iconPacks:PackIconMaterial
                                                Width="15"
                                                Height="15"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                Foreground="{DynamicResource AccentColorBrush}"
                                                Kind="DotsHorizontal" />
                                            <Button.ToolTip>
                                                <Label Content="{lex:Loc Key=button_select_path}" FontWeight="DemiBold" />
                                            </Button.ToolTip>
                                        </Button>
                                    </Grid>
                                    <StackPanel
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Orientation="Horizontal">
                                        <Label
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=cloaking_rules_header}"
                                            FontSize="16"
                                            FontWeight="Bold" />
                                        <Label
                                            Margin="0,2,0,0"
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=cloaking_rules_sub_header}"
                                            FontSize="12" />
                                    </StackPanel>
                                    <Grid
                                        Grid.Row="3"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <ListView
                                            Grid.Column="0"
                                            MinWidth="680"
                                            MinHeight="180"
                                            BorderBrush="#198AB328"
                                            IsEnabled="{Binding IsWorking, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                            ItemsSource="{Binding Path=CloakingRules}"
                                            ScrollViewer.CanContentScroll="True"
                                            ScrollViewer.VerticalScrollBarVisibility="Visible"
                                            SelectedItem="{Binding Path=SelectedCloakingEntry}">
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <UniformGrid Columns="2">
                                                        <Label Content="{Binding Key}" FontSize="10" />
                                                        <Label Content="{Binding Value}" FontSize="10" />
                                                    </UniformGrid>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                        <StackPanel
                                            Grid.Column="1"
                                            Margin="15,0,0,0"
                                            Orientation="Vertical">
                                            <Button
                                                x:Name="AddCloakingRule"
                                                Width="30"
                                                Height="30"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="AddCloakingRule"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="Plus" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_cloaking_add}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button
                                                x:Name="RemoveCloakingRule"
                                                Width="30"
                                                Height="30"
                                                Margin="0,7,0,0"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="RemoveCloakingRule"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="Minus" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_cloaking_remove}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button
                                                x:Name="ImportCloakingRules"
                                                Width="30"
                                                Height="30"
                                                Margin="0,7,0,0"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="ImportCloakingRules"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="FileImport" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_cloaking_import}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button
                                                x:Name="ExportCloakingRules"
                                                Width="30"
                                                Height="30"
                                                Margin="0,7,0,0"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="ExportCloakingRules"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="FileExport" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_cloaking_export}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                        </StackPanel>
                                    </Grid>
                                    <iconPacks:PackIconMaterial
                                        Grid.Row="4"
                                        Grid.Column="0"
                                        Width="20"
                                        Height="20"
                                        Margin="0,7,0,0"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                        Kind="Radar" />
                                    <TextBlock
                                        Grid.Row="4"
                                        Grid.Column="1"
                                        Margin="5,7,0,0"
                                        VerticalAlignment="Center"
                                        FontSize="20"
                                        FontWeight="Bold"
                                        Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                        Text="{lex:Loc Key=forwarding}"
                                        TextWrapping="Wrap" />
                                    <controls:ToggleSwitch
                                        Grid.Row="4"
                                        Grid.Column="1"
                                        Margin="0,7,5,0"
                                        HorizontalAlignment="Right"
                                        Cursor="Hand"
                                        IsOn="{Binding IsForwardingEnabled}" />
                                    <Grid
                                        Grid.Row="5"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Margin="0,10,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Label
                                            Grid.Column="0"
                                            Height="30"
                                            MinWidth="120"
                                            VerticalAlignment="Top"
                                            VerticalContentAlignment="Center"
                                            Content="{lex:Loc Key=forwarding_path}" />
                                        <TextBox
                                            Grid.Column="1"
                                            MinWidth="560"
                                            Margin="0,0,0,0"
                                            VerticalContentAlignment="Center"
                                            IsReadOnly="True"
                                            Text="{Binding ForwardingRulesFile}" />
                                        <Button
                                            x:Name="ChangeForwardingRulesFile"
                                            Grid.Column="2"
                                            Width="30"
                                            Height="30"
                                            Margin="15,0,0,0"
                                            HorizontalContentAlignment="Center"
                                            VerticalContentAlignment="Center"
                                            cal:Message.Attach="ChangeForwardingRulesFile"
                                            BorderBrush="{DynamicResource AccentColorBrush}"
                                            Cursor="Hand"
                                            FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                            IsEnabled="{Binding IsForwardingEnabled, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                            Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                            <iconPacks:PackIconMaterial
                                                Width="15"
                                                Height="15"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                Foreground="{DynamicResource AccentColorBrush}"
                                                Kind="DotsHorizontal" />
                                            <Button.ToolTip>
                                                <Label Content="{lex:Loc Key=button_select_path}" FontWeight="DemiBold" />
                                            </Button.ToolTip>
                                        </Button>
                                    </Grid>
                                    <StackPanel
                                        Grid.Row="6"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Orientation="Horizontal">
                                        <Label
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=forwarding_rules_header}"
                                            FontSize="16"
                                            FontWeight="Bold" />
                                        <Label
                                            Margin="0,2,0,0"
                                            VerticalAlignment="Center"
                                            Content="{lex:Loc Key=forwarding_rules_sub_header}"
                                            FontSize="12" />
                                    </StackPanel>
                                    <Grid
                                        Grid.Row="7"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <ListView
                                            Grid.Column="0"
                                            MinWidth="680"
                                            MinHeight="180"
                                            MaxHeight="600"
                                            BorderBrush="#198AB328"
                                            IsEnabled="{Binding IsWorking, Converter={StaticResource ReverseBoolToEnabledConverter}}"
                                            ItemsSource="{Binding Path=ForwardingRules}"
                                            ScrollViewer.CanContentScroll="True"
                                            ScrollViewer.VerticalScrollBarVisibility="Visible"
                                            SelectedItem="{Binding Path=SelectedForwardingEntry}">
                                            <ListView.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <VirtualizingStackPanel IsVirtualizing="True" VirtualizationMode="Recycling" />
                                                </ItemsPanelTemplate>
                                            </ListView.ItemsPanel>
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <UniformGrid Columns="2">
                                                        <Label Content="{Binding Key}" FontSize="10" />
                                                        <Label Content="{Binding Value}" FontSize="10" />
                                                    </UniformGrid>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                        <StackPanel
                                            Grid.Column="1"
                                            Margin="15,0,0,0"
                                            Orientation="Vertical">
                                            <Button
                                                x:Name="AddForwardingRule"
                                                Width="30"
                                                Height="30"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="AddForwardingRule"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="Plus" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_forwarding_add}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button
                                                x:Name="RemoveForwardingRule"
                                                Width="30"
                                                Height="30"
                                                Margin="0,7,0,0"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="RemoveForwardingRule"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="Minus" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_forwarding_remove}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button
                                                x:Name="ImportForwardingRules"
                                                Width="30"
                                                Height="30"
                                                Margin="0,7,0,0"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="ImportForwardingRules"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="FileImport" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_forwarding_import}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button
                                                x:Name="ExportForwardingRules"
                                                Width="30"
                                                Height="30"
                                                Margin="0,7,0,0"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="ExportForwardingRules"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="FileExport" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_forwarding_export}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                            </Border>
                        </DockPanel>
                    </TabItem.Content>
                </TabItem>
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_domainblocklog}"
                    Tag="domainBlockLogTab"
                    Visibility="{Binding SettingsViewModel.IsDomainBlockLogTabVisible, Converter={StaticResource BoolToVisibilityCollapsedConverter}}">
                    <TabItem.Content>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <DockPanel Margin="0,10,0,0">
                                <Border
                                    Margin="0,10,0,0"
                                    Padding="10"
                                    BorderThickness="1"
                                    DataContext="{Binding DomainBlockLogViewModel}"
                                    DockPanel.Dock="Top">
                                    <Border.BorderBrush>
                                        <DrawingBrush
                                            Opacity="0.4"
                                            TileMode="Tile"
                                            Viewport="0,0,8,8"
                                            ViewportUnits="Absolute">
                                            <DrawingBrush.Drawing>
                                                <DrawingGroup>
                                                    <GeometryDrawing Brush="{DynamicResource AccentTextFillColorPrimaryBrush}">
                                                        <GeometryDrawing.Geometry>
                                                            <GeometryGroup>
                                                                <RectangleGeometry Rect="0,0,50,50" />
                                                                <RectangleGeometry Rect="50,50,50,50" />
                                                            </GeometryGroup>
                                                        </GeometryDrawing.Geometry>
                                                    </GeometryDrawing>
                                                </DrawingGroup>
                                            </DrawingBrush.Drawing>
                                        </DrawingBrush>
                                    </Border.BorderBrush>
                                    <Grid Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=ActualHeight, Converter={StaticResource HeightConverter}, ConverterParameter='DomainBlockLog'}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <iconPacks:PackIconMaterial
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Width="20"
                                                Height="20"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                                Kind="Eye" />
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="5,0,0,3"
                                                VerticalAlignment="Center"
                                                FontSize="20"
                                                FontWeight="Bold"
                                                Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                                Text="{lex:Loc Key=domainblocklog}"
                                                TextWrapping="Wrap" />
                                            <controls:ToggleSwitch
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Margin="0,0,10,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Cursor="Hand"
                                                IsOn="{Binding IsDomainBlockLogLogging}" />
                                        </Grid>
                                        <Grid Grid.Row="1">
                                            <ListView
                                                Margin="10"
                                                VerticalContentAlignment="Stretch"
                                                BorderBrush="#198AB328"
                                                FontSize="12"
                                                ItemsSource="{Binding DomainBlockLogLines, Mode=OneWay}"
                                                ScrollViewer.CanContentScroll="True"
                                                ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                SelectedItem="{Binding SelectedDomainBlockLogLine}"
                                                SelectionMode="Single"
                                                VirtualizingStackPanel.VirtualizationMode="Recycling">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="{x:Type ListViewItem}">
                                                        <Setter Property="Background" Value="#198AB328" />
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid Margin="0,2">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="130" />
                                                                <ColumnDefinition Width="100" />
                                                                <ColumnDefinition Width="200" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Grid.Column="0" Text="{Binding Time, Converter={StaticResource LocalDateConverter}}" />
                                                            <TextBlock Grid.Column="1" Text="{Binding Host}" />
                                                            <TextBlock Grid.Column="2" Text="{Binding QName}" />
                                                            <TextBlock Grid.Column="3" Text="{Binding Message}" />
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>
                                            <StackPanel
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Orientation="Vertical">
                                                <StackPanel.Visibility>
                                                    <MultiBinding Converter="{StaticResource IntegerBoolToVisibilityConverter}">
                                                        <Binding Path="DomainBlockLogLines.Count" />
                                                        <Binding Path="IsDomainBlockLogLogging" />
                                                    </MultiBinding>
                                                </StackPanel.Visibility>
                                                <controls:ProgressRing
                                                    Width="24"
                                                    Height="24"
                                                    Foreground="{DynamicResource AccentColorBrush}" />
                                                <TextBlock Margin="0,10,0,0" Text="{lex:Loc Key=domainblocklog_waiting_for_data}" />
                                            </StackPanel>
                                        </Grid>
                                        <Grid Grid.Row="2" Margin="10,8,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="100" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="40" />
                                            </Grid.RowDefinitions>

                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                VerticalAlignment="Center"
                                                FontSize="12"
                                                Text="{lex:Loc Key=domainblocklog_entry_count}" />
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                FontSize="12"
                                                FontWeight="Bold"
                                                Text="{Binding DomainBlockLogLines.Count}" />

                                            <StackPanel
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right"
                                                Orientation="Horizontal">
                                                <Button
                                                    x:Name="ClearDomainBlockLog"
                                                    Width="30"
                                                    Height="30"
                                                    Margin="5,0,0,0"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    cal:Message.Attach="ClearDomainBlockLog"
                                                    BorderBrush="{DynamicResource AccentColorBrush}"
                                                    Cursor="Hand"
                                                    FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                    Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                    <iconPacks:PackIconMaterial
                                                        Width="15"
                                                        Height="15"
                                                        HorizontalContentAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        Foreground="{DynamicResource AccentColorBrush}"
                                                        Kind="NotificationClearAll" />
                                                    <Button.ToolTip>
                                                        <Label Content="{lex:Loc Key=querylog_button_clear}" FontWeight="DemiBold" />
                                                    </Button.ToolTip>
                                                </Button>
                                                <Button
                                                    x:Name="UnblockBlockLogEntry"
                                                    Width="30"
                                                    Height="30"
                                                    Margin="5,0,5,0"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    cal:Message.Attach="UnblockBlockLogEntry"
                                                    BorderBrush="{DynamicResource AccentColorBrush}"
                                                    Cursor="Hand"
                                                    FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                    Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                    <iconPacks:PackIconMaterial
                                                        Width="15"
                                                        Height="15"
                                                        HorizontalContentAlignment="Center"
                                                        VerticalContentAlignment="Center"
                                                        Foreground="{DynamicResource AccentColorBrush}"
                                                        Kind="Check" />
                                                    <Button.ToolTip>
                                                        <Label Content="whitelist" FontWeight="DemiBold" />
                                                    </Button.ToolTip>
                                                </Button>
                                            </StackPanel>
                                            <TextBlock
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                VerticalAlignment="Center"
                                                FontSize="12"
                                                Text="{lex:Loc Key=domainblocklog_source_file}" />
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                HorizontalContentAlignment="Stretch"
                                                VerticalContentAlignment="Center"
                                                Background="{DynamicResource AccentTextFillColorPrimaryBrush}"
                                                IsReadOnly="True"
                                                Opacity="0.4"
                                                Text="{Binding DomainBlockLogFile}" />
                                            <Button
                                                x:Name="ChangeBlockLogFilePath"
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                Width="30"
                                                Height="30"
                                                Margin="5,0,5,0"
                                                HorizontalAlignment="Right"
                                                HorizontalContentAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                cal:Message.Attach="ChangeBlockLogFilePath"
                                                BorderBrush="{DynamicResource AccentColorBrush}"
                                                Cursor="Hand"
                                                FocusVisualStyle="{DynamicResource MahApps.Metro.Styles.MetroCircleFocusVisual}"
                                                IsEnabled="False"
                                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}">
                                                <iconPacks:PackIconMaterial
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalContentAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    Foreground="{DynamicResource AccentColorBrush}"
                                                    Kind="DotsHorizontal" />
                                                <Button.ToolTip>
                                                    <Label Content="{lex:Loc Key=button_select_path}" FontWeight="DemiBold" />
                                                </Button.ToolTip>
                                            </Button>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </DockPanel>
                        </ScrollViewer>
                    </TabItem.Content>
                </TabItem>
                <TabItem
                    Height="39"
                    Padding="10,2,10,2"
                    VerticalAlignment="Top"
                    Header="{lex:Loc Key=tabitem_addressblacklist}"
                    Tag="addressBlacklistTab"
                    Visibility="{Binding SettingsViewModel.IsAddressBlacklistTabVisible, Converter={StaticResource BoolToVisibilityCollapsedConverter}}">
                    <TabItem.Content>
                        <DockPanel Margin="0,10,0,0">
                            <Border
                                Margin="0,10,0,0"
                                Padding="10"
                                BorderThickness="1"
                                DataContext="{Binding AddressBlacklistViewModel}"
                                DockPanel.Dock="Top">
                                <Border.BorderBrush>
                                    <DrawingBrush
                                        Opacity="0.4"
                                        TileMode="Tile"
                                        Viewport="0,0,8,8"
                                        ViewportUnits="Absolute">
                                        <DrawingBrush.Drawing>
                                            <DrawingGroup>
                                                <GeometryDrawing Brush="{DynamicResource AccentTextFillColorPrimaryBrush}">
                                                    <GeometryDrawing.Geometry>
                                                        <GeometryGroup>
                                                            <RectangleGeometry Rect="0,0,50,50" />
                                                            <RectangleGeometry Rect="50,50,50,50" />
                                                        </GeometryGroup>
                                                    </GeometryDrawing.Geometry>
                                                </GeometryDrawing>
                                            </DrawingGroup>
                                        </DrawingBrush.Drawing>
                                    </DrawingBrush>
                                </Border.BorderBrush>
                                <StackPanel />
                            </Border>
                        </DockPanel>
                    </TabItem.Content>
                </TabItem>
            </TabControl>
        </Border>
    </Grid>
</UserControl>